<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="css/stylesheet.css">
  <script async src="MathJax-2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  <script>
    // 画像のロード
    const srcList = [
      "img/soundsource.svg",
      "img/observer_stop.svg",
      "img/observer_run.svg",
      "img/observer_run_reverse.svg"
    ];

    const imgList = [];
    for ( let i in srcList ) {
      imgList[i]     = new Image();
      imgList[i].src = srcList[i];
    }
  </script>
  <title>ドップラー効果</title>
</head>
<body>

  <div id="user-area">

    <div id="section-wrapper">

      <div id="ope-section">

        <select id="select-box" onchange="onChangeSelectBox()">
          <option value="6" selected>① 音波が観測者に伝わるしくみ</option>
          <option value="0">② 音波に偏りができるしくみ</option>
          <optgroup label="③ 音源が観測者を追い越すとき">
            <option value="1">③ (1) 救急車が止まっている人を追い越すとき</option>
            <option value="3">③ (2) 救急車が動く人を追い越すとき</option>
          </optgroup>
          <optgroup label="④ 観測者が音源を追い越すとき">
            <option value="2">④ (1) 人が止まっている救急車を追い越すとき</option>
            <option value="4">④ (2) 人が動く救急車を追い越すとき</option>
          </optgroup>
          <option value="5">⑤ 互いに逆方向に進むとき</option>
        </select>

        <div id="btn-wrapper">
          <button id="start-btn" type="button" onclick="onStartButtonClick();">スタート / ストップ</button>
          <button id="reset-btn" type="button" onclick="onResetButtonClick();">リセット</button>
        </div>

      </div>

      <div id="calc-section">

        <div id="data-top">
          <div class="data">
            <span>\(V\)</span>
            <span id="sound-vel" class="value">340.00</span>
            <span class="unit">\([\mbox{m/s}]\)</span>
          </div>
          <div class="data">
            <span>\(v_s\)</span>
            <span id="source-vel" class="value"></span>
            <span class="unit">\([\mbox{m/s}]\)</span>
          </div>
          <div class="data">
            <span>\(v_o\)</span>
            <span id="observer-vel" class="value"></span>
            <span class="unit">\([\mbox{m/s}]\)</span>
          </div>
        </div>

        <div id="data-bottom">
          <div class="data">
            <span>\(f\)</span>
            <span id="source-freq" class="value"></span>
            <span class="unit">\([\mbox{Hz}]\)</span>
          </div>
          <div class="data">
            <span>\(f'\)</span>
            <span id="observer-freq" class="value"></span>
            <span class="unit">\([\mbox{Hz}]\)</span>
          </div>
        </div>

      </div>

    </div>

    <div id="formula-section">

      <div id="doppler">
        <p>
          ドップラー効果
        </p>
        <p>
          \[ f'=\frac{V-v_o}{V-v_s}f \]
        </p>
      </div>

      <div id="alpha">
        <p>
          \(V\)：音速 \([\mbox{m/s}]\)
        </p>
        <p>
          \(v_s\)：救急車の移動速度 \([\mbox{m/s}]\)
        </p>
        <p>
          \(v_o\)：人の移動速度 \([\mbox{m/s}]\)
        </p>
        <p>
          \(f\)：救急車が発する音の周波数 \([\mbox{Hz}]\)
        </p>
        <p>
          \(f'\)：人が聞く音の周波数 \([\mbox{Hz}]\)
        </p>
      </div>

    </div>

  </div>

  <div id="anim-area">

    <div id="bar">
      <canvas id="bar-cvs" width="850" height="510"></canvas>
    </div>

    <div id="graph1">
      <p><span>救急車が発する音の振動グラフ</span></p>
      <canvas id="graph1-cvs" width="850" height="80"></canvas>
    </div>

    <div id="phenom">
      <p><span>再現エリア</span></p>
      <canvas id="phenom-cvs" width="850" height="160"></canvas>
    </div>

    <div id="graph2">
      <p><span>人が聞く音の振動グラフ</span></p>
      <canvas id="graph2-cvs" width="850" height="80"></canvas>
    </div>

    <div id="graph3">
      <p><span>両者の振動グラフ</span></p>
      <canvas id="graph3-cvs" width="850" height="80"></canvas>
    </div>

  </div>

  <script src="js/common.js"></script>
  <script src="js/option0.js"></script>
  <script src="js/option1.js"></script>
  <script src="js/option2.js"></script>
  <script src="js/option3.js"></script>
  <script src="js/option4.js"></script>
  <script src="js/option5.js"></script>
  <script src="js/option6.js"></script>
  <script src="js/branch.js"></script>
  <script src="js/operation.js"></script>
</body>
</html>
